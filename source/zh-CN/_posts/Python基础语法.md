---
title: PythonåŸºç¡€è¯­æ³•
date: 2019-09-12 03:50:22
categories: Python
---

## Pythonè§£é‡Šå™¨

## å®žçŽ°

| ç‰ˆæœ¬       | å®žçŽ°æ–¹å¼                   | ç‰¹ç‚¹                                                    |
| ---------- | -------------------------- | ------------------------------------------------------- |
| CPython    | Cè¯­è¨€å†™çš„Python            | é€Ÿåº¦å¿«                                                  |
| JPython    | ç”±Javaç¼–å†™çš„Python         | å¯ä»¥ç›´æŽ¥è°ƒç”¨Javaçš„å„ç§å‡½æ•°åº“                            |
| PyPy       | ç”±rPythonç¼–å†™çš„Python      | æ›´çµæ´», æ˜“äºŽä½¿ç”¨å’Œè¯•éªŒ                                  |
| IronPython | ä»¥. NETå’ŒMonoå®žçŽ°çš„[ython   | é¢å‘NETå’ŒECMA CLIçš„Pythonå®žçŽ°                           |
| ZhPy       | åªæ˜¯æŠŠPythonç¿»è¯‘äº†ä¸€éè€Œå·² | åˆç§°ä¸­èŸ’, å¯ä»¥å®Œå…¨ç”¨ä¸­æ–‡ç¼–ç¨‹. ä½†ä¸­èŸ’ç›®å‰å·²ç»åœæ­¢æ›´æ–°äº†.|

æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„Pythonæ˜¯**CPython**, ðŸ‘‡Pythonå®˜æ–¹é¡µé¢æä¾›çš„æ˜¯CPython

![1565579206457](PythonåŸºç¡€è¯­æ³•/1565579206457.png)

## ç‰ˆæœ¬

Pythonè¿™ç§è¯­è¨€æœ‰Python2å’ŒPython3ä¸¤ä¸ªç‰ˆæœ¬, ä¸¤è€…è¯­æ³•æœ‰å°‘è®¸ä¸åŒ, ä¸€èˆ¬ä¸èƒ½ç›´æŽ¥æŠŠå¦ä¸€ä¸ªç‰ˆæœ¬çš„ç¨‹åºæ‹¿æ¥è¿è¡Œ

## å“²å­¦

**ä¸‡ç‰©çš†å¯¹è±¡**

pythonåœ¨è®¾è®¡åˆå§‹æ˜¯ä¸€ç§**é¢å‘å¯¹è±¡**è¯­è¨€.

:bulb: é¢å‘å¯¹è±¡æ˜¯ä¸€ç§**ç¼–ç¨‹èŒƒå¼**

## æ•°æ®ç±»åž‹

Pythonæ˜¯ä¸€é—¨**åŠ¨æ€ç±»åž‹**è¯­è¨€

### ç±»åž‹æ³¨è§£

åœ¨Python3ä¸­æœ‰äº†æ–°ç‰¹æ€§: **ç±»åž‹æ³¨è§£**

``` python
def add(x:int, y:int) -> int:
    return x + y
```

``` python
def add(x, y):
    return x + y
```

æ­£å¦‚å…¶å, æ³¨è§£åªæ˜¯æ ‡æ³¨ä¸€ä¸‹, æœ‰äº†ç±»åž‹æ³¨è§£çš„ç¨‹åºå’Œæ²¡æœ‰ç±»åž‹æ³¨è§£çš„ç¨‹åºè¿è¡Œèµ·æ¥æ²¡æœ‰åŒºåˆ«, ä½†å®ƒèƒ½å¸®åŠ©ç¨‹åºå‘˜æ›´å¥½çš„å‘çŽ°é—®é¢˜, ä¹Ÿèƒ½è®©IDEæä¾›æ›´å‡†ç¡®çš„ä»£ç è¡¥å…¨å’Œè¯­æ³•æ£€æŸ¥.

### ç±»åž‹æ£€æŸ¥

æœ‰æ—¶å€™ä¸ºäº†ä¿è¯ç¨‹åºçš„ä¸¥è°¨æ€§æˆ‘ä»¬ä¼šæ£€æŸ¥ä¸€ä¸‹å˜é‡æ˜¯ä¸æ˜¯æˆ‘ä»¬è®¾æƒ³å®ƒåº”è¯¥æ˜¯çš„ç±»åž‹, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ç”¨ `isinstance()`

ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨ `type()` æ˜¯å› ä¸º `type()` ä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»åž‹, ä¸è€ƒè™‘ç»§æ‰¿å…³ç³». ä¸¾ä¾‹è¯´æ˜Ž:

``` python
class A(object):
    pass

class B(A):
    pass
i = 1
print isinstance(i, int)
print isinstance(A(), A)
print type(A()) == A
print isinstance(B(), A)
print type(B()) == A
```

``` python
# èŽ·å–å˜é‡å†…å­˜åœ°å€
id(å˜é‡å)
# å¾—åˆ°å˜é‡ç±»åž‹
type(å˜é‡å)
# å¾—åˆ°å˜é‡çš„å†…å­˜å¤§å°
import sys
sys.getsizeof(å˜é‡å)
```

### ä¸å¯å˜å¯¹è±¡

#### Number (æ•°å­—)

* int (æ•´æ•°)
* long (é•¿æ•´æ•°)
* float (æµ®ç‚¹æ•°, å³å°æ•°)
* bool (å¸ƒå°”å€¼, å³ `True` å’Œ `False` )

Pythonä¸­çš„Numberæˆ‘è®¤ä¸ºæ˜¯æ¯”è¾ƒç‰¹æ®Šçš„, å› ä¸ºå®ƒ**åœ¨å†…å­˜ä¸­å ç”¨çš„ç©ºé—´å¤§å°æ˜¯å˜åŠ¨**çš„.(åœ¨CPythonä¸­æ˜¯å¦‚æ­¤, ä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨IronPythonä¸‹ä¸æ˜¯)String (å­—ç¬¦ä¸²)

#### Tuple (å…ƒç»„)

:exclamation: æˆ‘ä»¬å¯ä»¥ç»™ä¸å¯å˜å¯¹è±¡é‡æ–°èµ‹å€¼, ä½†å…¶å†…å­˜åœ°å€ä¼šæ”¹å˜. ä»¥ä¸‹æ˜¯ä½“çŽ°ç»™å¯å˜å¯¹è±¡/ä¸å¯å˜å¯¹è±¡é‡æ–°èµ‹å€¼æ—¶å®ƒä»¬çš„å†…å­˜åœ°å€å˜åŒ–çš„ä»£ç .

``` python
x = 3
y = x
print id(x), id(y)
y = 4
print id(x), id(y)
print x, y
a = [1, 2, 3]
b = a
print id(a), id(b)
b.append(4)
print id(a), id(b)
print a, b
```

### å¯å˜å¯¹è±¡

#### List (åˆ—è¡¨)

#### Set (é›†åˆ)

#### Dictionary (å­—å…¸)

å¯å˜å¯¹è±¡å¯èƒ½å¸¦æ¥çš„å±é™©ä¸¾ä¾‹:

``` python
def func(l = []):
    l.append('add')
    print(l)
```

``` shell
myfunc([1, 2, 3])
myfunc([1, 2, 3])
myfunc()
```

pythonä¸­å‘å‡½æ•°ä¼ é€’å‚æ•°åªæ˜¯**å¼•ç”¨ä¼ é€’**: å¦‚æžœå‚æ•°ä¸ºå¯å˜å¯¹è±¡, åœ¨å‡½æ•°ä¸­å˜åŒ–ä¼šå½±å“å¼•ç”¨çš„è¿™ä¸ªå˜é‡, è€Œä¸å¯å˜å¯¹è±¡ä¸ä¼š. åœ¨å‘ç±»ä¼ é€’å‚æ•°æ—¶ä¹Ÿæ˜¯å¦‚æ­¤.

``` python
l1 = [1, 2, 3]
l2 = [[1, 2, 3],
	[3, 4, 5],
	[6, 7, 8]]
l1x = l1
l1x[0] = 4
print(l1)
l1x = l1.copy()
l1x[0] = 5
print(l1)
l2x = l2.copy()
l2x[1][1] = 'a'
print(l2)
import copy
l2x = copy.deepcopy(l2)
l2x[1][1] = 'b'
print(l2)
```

## åŸºç¡€è¯­æ³•

### å¸®åŠ©æ–‡æ¡£

``` python
help()
```

æŒ‰ `q` é€€å‡ºå¸®åŠ©æ–‡æ¡£

### æ³¨é‡Š

åœ¨Pythonä¸­ `#` å¼€å¤´çš„ä¸ºæ³¨é‡Š

#### ç‰¹æ®Šæ³¨é‡Š

###### shebang

shenbang, hashbangæŒ‡çš„æ˜¯ä»¥ `#!` å¼€å¤´çš„è¯­å¥. Linuxæ“ä½œç³»ç»Ÿçš„ç¨‹åºåŠ è½½å™¨ä¼šåˆ†æž Shebang åŽçš„å†…å®¹ï¼Œå°†è¿™äº›å†…å®¹ä½œä¸ºè§£é‡Šå™¨æŒ‡ä»¤ï¼Œå¹¶è°ƒç”¨è¯¥æŒ‡ä»¤ï¼Œå¹¶å°†è½½æœ‰ Shebang çš„æ–‡ä»¶è·¯å¾„ä½œä¸ºè¯¥è§£é‡Šå™¨çš„å‚æ•°. å› ä¸ºåœ¨å¾ˆå¤šè¯­è¨€ä¸­ä»¥ `#` å¼€å¤´çš„æ˜¯æ³¨é‡Š, æ‰€ä»¥ä¸ä¼šå½±å“ç¨‹åº.

æœ‰çš„pythonæ–‡ä»¶æ˜¯è¿™ä¹ˆå¼€å¤´çš„:

``` python
#! /usr/bin/python
# -*- coding:utf-8 -*-
```

ç¬¬ä¸€è¡Œæ˜¯ç»™Linuxç³»ç»Ÿçš„ç¨‹åºåŠ è½½å™¨çœ‹çš„, å› æ­¤åœ¨Windowsä¸‹ä¸éœ€è¦è¿™å¥, ç¬¬äºŒå¥æ˜¯æŒ‡å®šæ–‡ä»¶çš„ç¼–ç æ ¼å¼ä¸º**UTF-8**, é¿å…å‡ºçŽ°ä¹±ç 

###### docstring

``` python
def func(int x, int y):
    """
    è¿™é‡Œæ˜¯docstring, æ˜¯ç‰¹æ®Šçš„æ³¨é‡Š, èƒ½è®©IDE, ç¼–è¾‘å™¨åœ¨é¼ æ ‡ç§»åŠ¨åˆ°æœ‰docstringçš„å‡½æ•°, ç±»ä¸Šæ—¶æ˜¾ç¤ºè¿™æ®µdocstring
    """
    pass
a = func(i)
```

### æ¡ä»¶è¯­å¥åŠå¾ªçŽ¯

#### if elif

``` python
if True:
    pass
elif True:
    pass
else:
    pass
if 2 >3:
    a = 2
else:
    a = 4
```

``` python
a = (2 if (2 > 3) else 4)
```

#### ç”Ÿæˆå™¨ Â·è¿­ä»£å™¨Â·range

è¯­æ³•ç±»ä¼¼äºŽåˆ‡ç‰‡

### æŽ¨å¯¼å¼

**æŽ¨å¯¼å¼comprehensions**ï¼ˆåˆç§°è§£æžå¼ï¼‰, æ˜¯Pythonçš„ä¸€ç§ç‹¬æœ‰ç‰¹æ€§.**æŽ¨å¯¼å¼æ˜¯å¯ä»¥ä»Žä¸€ä¸ªæ•°æ®åºåˆ—æž„å»ºå¦ä¸€ä¸ªæ–°çš„æ•°æ®åºåˆ—çš„ç»“æž„ä½“**. æ¢å¥è¯è¯´èƒ½ä»Žä¸€ç»„æ•°æ®ä¸­æ±‚å‡ºæ»¡è¶³æ¡ä»¶çš„æ–°æ•°æ®, æ¯”å¦‚a, bä¸¤ä¸ªç­‰é•¿åˆ—è¡¨ä¸­éƒ½ä¸ºå¶æ•°çš„é¡¹çš„ä¹˜ç§¯. å…±æœ‰ä¸‰ç§æŽ¨å¯¼å¼, åœ¨Python2å’Œ3 ä¸­éƒ½æœ‰æ”¯æŒ:

* åˆ—è¡¨æŽ¨å¯¼å¼
* å­—å…¸æŽ¨å¯¼å¼
* é›†åˆæŽ¨å¯¼å¼

åˆ—è¡¨æŽ¨å¯¼å¼çš„è¯­æ³•:

``` python
l = [output_expression for out_exp in input_list if expression]
```

ä½¿ç”¨ä¸¾ä¾‹:

``` python
# 1
a = [i for i in range(30) if i % 3 is 0]
# 2
names = ['Bob','Tom','alice','Jerry','Wendy','Smith']
LONG_NAMES = [name.upper() for name in names if len(name)>3]
# 3
a = [x*y for x in range(1,5) if x > 2 for y in range(1,4) if y < 3]

l = [a[i][0] for i in range(len(a))]

h = ''
for i in range(len(a)):
    h.append(a[i][0])
```

### çŸ©é˜µå¤„ç†

#### åˆ‡ç‰‡

å› ä¸ºtuple, å­—ç¬¦ä¸²å…¶å®žéƒ½æ˜¯ç‰¹æ®Šçš„åˆ—è¡¨, åˆ—è¡¨, å­—ç¬¦ä¸², å…ƒç»„éƒ½å¯ä»¥è¿›è¡Œåˆ‡ç‰‡.

``` python
a = [1, 2, 3, 4, 5, 6, 7]
b = a[begin:end:step]
```

åœ¨æ²¡æœ‰**numpy**åº“çš„æƒ…å†µä¸‹**å¤šç»´åˆ‡ç‰‡**æ˜¯é€šè¿‡æŽ¨å¯¼å¼å®žçŽ°çš„:

``` python
a = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
b = [a[i][:-1] for i in range(1, 3)]
```

### å‡½æ•°

:bulb: è¦æ³¨æ„å‡½æ•°ååŽçš„ `()` ä¹Ÿæ˜¯ä¸€ç§è¿ç®—ç¬¦, ç§°ä¸ºå‡½æ•°è°ƒç”¨è¿ç®—ç¬¦. å¦‚æžœè°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¸åŠ ()åªä¼šåˆ›å»ºä¸€ä¸ªè¯¥å‡½æ•°çš„å¯¹è±¡è€Œä¸ä¼šè°ƒç”¨å®ƒ.

#### å®šä¹‰å‡½æ•°

pythonä¸­ä»¥ `def` å…³é”®å­—å®šä¹‰å‡½æ•°, ç»“æž„å¦‚ä¸‹:

``` python
def å‡½æ•°å(å‚æ•°åˆ—è¡¨):
    å‡½æ•°ä¸»ä½“
```

pythonä¸­çš„å‡½æ•°å¯ä»¥æœ‰è¿”å›žå€¼ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›žå€¼

``` python
def func1():
    pass
def func2(l):
    l.appeend('add')
def func3(x, y):
    return x + y
```

### ç”¨å­—å…¸æ¥å®žçŽ°case

``` python
# -*- coding: cp936 -*-

def print1():
    print('111')


def print2():
    print('222')


def printdefault():
    print('default')


dic = {
    'a': print1,
    'b': print2,
	'default': printdefault}

i = input('è¾“å…¥: ')
main = dic[i if (i != 'a' or i != 'b') else 'default']
main()
```

### ç¼–ç æ ¼å¼

å­—ç¬¦ä¸²ç»è¿‡**ç¼–ç ï¼ˆencodeï¼‰** å°±æˆä¸ºäº†ä¸€å †æ•°æ®, åè¿‡æ¥, æ•°æ®ç»è¿‡**è§£ç ï¼ˆdecodeï¼‰** å°±å˜å›žæˆ‘ä»¬è®¤è¯†çš„å­—ç¬¦ä¸².

![img](PythonåŸºç¡€è¯­æ³•/encode_decode.png)

æŒ‡å®šæ–‡ä»¶ç¼–ç æ ¼å¼ä¸º `utf-8`

``` python
# -*- coding:utf-8 -*-
```

:bulb: å¦‚æžœä¸æŒ‡å®šæ–‡ä»¶ç¼–ç æ ¼å¼åœ¨æœ‰çš„Python2ç‰ˆæœ¬ä¸­æ— æ³•è¯†åˆ«ä¸­æ–‡, å³ä¾¿æ˜¯ä¸­æ–‡æ³¨é‡Šä¹Ÿä¼šæŠ¥é”™.

![Unicode Decoding and Encoding](PythonåŸºç¡€è¯­æ³•/Unicode_Decoding_and_Encoding.png)

Linuxç³»ç»Ÿé»˜è®¤ç¼–ç æ ¼å¼æ˜¯**UTF-8**, ç³»ç»Ÿè¯­è¨€æ˜¯ç®€ä½“ä¸­æ–‡æ—¶Windows10çš„ç¼–ç æ ¼å¼æ˜¯**GB2312** (ä¹Ÿç§°GBK, å›½æ ‡æ‰©å±•, cp936)

åœ¨pythonä¸­ `str` ç±»åž‹æ•°æ®éƒ½ä»¥Unicodeç ç‚¹æ ¼å¼å‚¨å­˜, å› æ­¤ç›´æŽ¥æ‰“å°å­—ç¬¦ä¸²ä¼šçœ‹åˆ°å­—ç¬¦ä¸º'\u'å¼€å¤´

### åŸºæœ¬è¯»å†™

``` python
f = open("test.txt", "r+")
f.read()
f.write("text")
f.close()
```

`r` æ˜¯æ™®é€šæ¨¡å¼, `r+` æ˜¯è¯»å†™, `w` æ˜¯è¦†ç›–å†™å…¥æ¨¡å¼, `w+` æ˜¯è¦†ç›–è¯»å†™, `a` æ˜¯è¿½åŠ æ¨¡å¼, `a+` æ˜¯è¿½åŠ è¯»å†™, bæ˜¯ä»¥äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€

``` python
with open('test.txt', "r+") as f:
    f.write()
    f.read()
    f.readlines()
    f.readline()
```

## è„šæœ¬å’Œæ™®é€šç¨‹åºçš„åŒºåˆ«

è„šæœ¬è¿™ä¸ªè¯æ¥æºäºŽæˆå‰§, èƒ½ç”¨äºŽèˆžå°æ¼”å‡ºçš„æˆå‰§æ–‡æœ¬å°±ç§°ä¸ºè„šæœ¬. åœ¨ç¼–ç¨‹ä¸­çš„è„šæœ¬æ˜¯è§£é‡Šæ‰§è¡Œçš„ç¨‹åº, é€šå¸¸åªç”¨æ¥åšç®€å•çš„å¤„ç†, èµ·è¾…åŠ©ä½œç”¨

## è§£é‡Šå™¨çš„ä½¿ç”¨æŠ€å·§

åœ¨è§£é‡Šå™¨ä¸­äº¤äº’å¼ç¼–ç¨‹æ—¶è¦æ³¨æ„ç¼©è¿›ä¸è¦é”™

### æ¸…å±

pythonè§£é‡Šå™¨æœ¬èº«æ²¡æœ‰æ¸…å±å‘½ä»¤, åªèƒ½é€šè¿‡è°ƒç”¨å‘½ä»¤è¡Œçš„æ¸…å±å‘½ä»¤æ¥è¾¾åˆ°æ•ˆæžœ

``` python
import os
# Windowsä¸‹
os.system('cls')
# Linuxä¸‹
os.system('clear')
```

## ä»£ç é£Žæ ¼

* åœ¨é™¤äº†å‡½æ•°è°ƒç”¨ç¬¦çš„è¿ç®—ç¬¦ä¸¤ä¾§åŠ ç©ºæ ¼
* æ³¨é‡Šæ—¶åœ¨ `#` åŽå†™ä¸ªç©ºæ ¼å†å†™æ³¨é‡Šå†…å®¹
* è¡Œå°¾æ³¨é‡Šæ—¶å…ˆå†™ä¸¤ä¸ªç©ºæ ¼å†å†™æ³¨é‡Š

